import{q as j,a as K,G as q,e as H,H as J,be as Q,v as p,K as x,o as r,I as _,J as n,j as t,L as v,t as h,h as W,$,g as f,f as P,S as X,F as T,k as N,O as Y,C as Z,r as L,N as ee,ar as te,w as le}from"./app-quOHq0P1.js";import{E as oe,a as ae}from"./index-KgJ6h0K3.js";import{E as ne,a as se}from"./index-DGIErjzx.js";import{E as re}from"./index-fTWddJ3y.js";import{a as z,E as G}from"./index-GYzELZbe.js";import"./castArray-Rh-FLT90.js";import"./clone-D9JrRJfK.js";import"./_baseClone-DY4tO53J.js";import"./isEqual-DTuzvI-Z.js";import"./_initCloneObject-h1GxFYH3.js";import"./index-NkzjzO9b.js";import"./_baseIteratee-BzHBCr60.js";import"./merge-BVWjjS0z.js";import"./isArrayLikeObject-CBzOw1k1.js";import"./index-BsvDUm3z.js";const I=j("forward",{state:()=>({panel:{visible:!1,loading:!1,edit:{id:null,name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});var B=(i=>(i[i.Stop=0]="Stop",i[i.Running=1]="Running",i[i.AlreadyUsed=2]="AlreadyUsed",i))(B||{});const ie={class:"mb-2 ml-20"},de={class:"flex flex-row items-center w-72"},ue={class:"forward-arrow"},me={key:0,class:"el-icon-bottom"},ce={key:1,class:"el-icon-top"},pe={class:"flex flex-row items-center w-72"},ve={class:"flex flex-row"},fe=K({__name:"ForwardDialog",emits:["save"],setup(i,{emit:w}){const y=q({host:null}),S=w,g=I(),l=H(()=>g.panel),U=H(()=>l.value.edit.type=="Dynamic"?"1080":"port"),d=H(()=>{switch(l.value.edit.type){case"Local":return $("ssh.portForward.local");case"Remote":return $("ssh.portForward.remote")}return $("ssh.portForward.dynamic")});J(()=>l.value.edit.type,u=>{l.value.edit.id||(l.value.edit.remoteHost=u=="Remote"?y.host:"127.0.0.1")}),Q(()=>{p.on("config",u=>{Object.assign(y,u)})});const k=()=>{S("save",l.value.edit),l.value.loading=!0};return(u,e)=>{const R=x("RedMark"),E=oe,A=ae,b=ne,V=Y,F=x("vsc-switch"),D=se,a=x("vsc-button"),C=re;return r(),_(C,{ref:"editDialog",modelValue:l.value.visible,"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.visible=o),"show-close":!1,title:"Port Fowarding",width:"550px",top:"3vh",closeOnClickModal:!1},{footer:n(()=>[t(a,{type:"secondary",onClick:e[10]||(e[10]=o=>l.value.visible=!1)},{default:n(()=>[v(h(W($)("common.cancel")),1)]),_:1}),t(a,{loading:l.value.loading,onClick:k},{default:n(()=>e[20]||(e[20]=[v("Save")])),_:1},8,["loading"])]),default:n(()=>[t(D,{ref:"infoForm",model:l.value.edit,"label-width":"120px"},{default:n(()=>[f("div",ie,h(d.value),1),t(b,null,{label:n(()=>[t(R),e[12]||(e[12]=v("Type "))]),default:n(()=>[t(A,{modelValue:l.value.edit.type,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.edit.type=o),type:"relax"},{default:n(()=>[t(E,{modelValue:l.value.edit.type,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.edit.type=o),value:"Local"},{default:n(()=>e[13]||(e[13]=[v("Local")])),_:1},8,["modelValue"]),t(E,{modelValue:l.value.edit.type,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.edit.type=o),value:"Remote"},{default:n(()=>e[14]||(e[14]=[v("Remote")])),_:1},8,["modelValue"]),t(E,{modelValue:l.value.edit.type,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.edit.type=o),value:"Dynamic"},{default:n(()=>e[15]||(e[15]=[v(" Dynamic(Socks Proxy) ")])),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(b,null,{label:n(()=>[t(R),e[16]||(e[16]=v("Local "))]),default:n(()=>[f("div",de,[t(V,{modelValue:l.value.edit.localHost,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.edit.localHost=o),class:"basis-72"},null,8,["modelValue"]),e[17]||(e[17]=f("span",{class:"basis-14 text-center text-base"},":",-1)),t(V,{modelValue:l.value.edit.localPort,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.edit.localPort=o),placeholder:U.value,class:"basis-32"},null,8,["modelValue","placeholder"])])]),_:1}),l.value.edit.type!="Dynamic"?(r(),P(T,{key:0},[f("div",ue,[l.value.edit.type=="Remote"?(r(),P("i",me)):(r(),P("i",ce))]),t(b,null,{label:n(()=>[t(R),e[18]||(e[18]=v("Remote "))]),default:n(()=>[f("div",pe,[t(V,{modelValue:l.value.edit.remoteHost,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.edit.remoteHost=o),class:"basis-72"},null,8,["modelValue"]),e[19]||(e[19]=f("span",{class:"basis-14 text-center text-base"},":",-1)),t(V,{modelValue:l.value.edit.remotePort,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.edit.remotePort=o),placeholder:"port",class:"basis-32",onKeyup:X(k,["enter"])},null,8,["modelValue"])])]),_:1})],64)):N("",!0),f("div",ve,[t(b,{label:"Name",class:"w-64"},{default:n(()=>[t(V,{modelValue:l.value.edit.name,"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.edit.name=o)},null,8,["modelValue"])]),_:1}),t(b,{class:"auto-start-form-item",label:"Auto Start",title:"Auto start with VS Code startup"},{default:n(()=>[t(F,{modelValue:l.value.edit.autoStartUp,"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.edit.autoStartUp=o),class:"ml-2"},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),ye=Z(fe,[["__scopeId","data-v-78656478"]]),_e=K({__name:"ForwardServerTable",props:{serverList:Array},emits:["selectServer"],setup(i,{emit:w}){const y=w;return(S,g)=>{const l=G,U=x("vsc-button"),d=z;return r(),_(d,{data:i.serverList,style:{width:"100%"}},{default:n(()=>[t(l,{prop:"key",label:"Key",width:"150",align:"center"}),t(l,{prop:"name",label:"Name",width:"350",align:"center"}),t(l,{prop:"count",label:"Count",width:"70",align:"center"}),t(l,{label:"Operation",width:"90",align:"center"},{default:n(({row:k})=>[t(U,{type:"icon",icon:"codicon-edit",title:"edit",onClick:u=>y("selectServer",k)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])}}}),we={class:"ml-2 my-1 text-base"},be={class:"ml-5"},Fe=K({__name:"forward",setup(i){const w=L(""),y=L(null),S=L([]),g=L([]),l=L(!1),U=I(),d=H(()=>U.panel);ee(()=>{p.on("forwardList",a=>{g.value=a,d.value.loading=!1,d.value.visible=!1}).on("serverList",a=>{S.value=a}).on("name",a=>{w.value=a}).on("success",()=>{p.emit("load")}).on("error",({id:a,message:C})=>{for(const o of g.value)o.id==a&&(o.loading=!1);d.value.loading=!1,te({message:C,type:"error"})}).init()});const k=a=>{w.value=a.name,y.value=a.key,l.value=!1,p.emit("selectServer",a.key)},u=a=>{p.emit("save",{info:a,serverKey:y.value})},e=()=>{d.value.edit={type:"Local",autoStartUp:!1,localHost:"127.0.0.1",remoteHost:"127.0.0.1"},d.value.visible=!0},R=()=>{p.emit("load")},E=a=>{switch(a){case B.Running:return"Running";case B.AlreadyUsed:return"AlreadyUsed";default:return"Stop"}},A=a=>{a.loading=!0,p.emit("start",a.id)},b=a=>{p.emit("stop",a)},V=a=>{p.emit("remove",{id:a,serverKey:y.value})},F=a=>{d.value.edit={...a},d.value.visible=!0},D=a=>{le($("confirm.deleteForward")).then(()=>{V(a)})};return(a,C)=>{const o=x("vsc-button"),m=G,M=x("vsc-switch"),O=z;return r(),P("div",null,[l.value?(r(),_(_e,{key:0,serverList:S.value,onSelectServer:k},null,8,["serverList"])):(r(),P(T,{key:1},[f("div",we,[t(o,{type:"icon",icon:"el-icon-d-arrow-left",onClick:C[0]||(C[0]=s=>l.value=!0)}),t(o,{type:"icon",icon:"codicon-add text-base",style:{color:"var(--vscode-terminal-ansiCyan)"},onClick:e}),t(o,{type:"icon",icon:"codicon-refresh text-base",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},onClick:R}),f("span",be,"Connection: "+h(w.value),1)]),t(O,{data:g.value,style:{width:"100%"}},{default:n(()=>[t(m,{prop:"name",label:"Name"}),t(m,{prop:"type",label:"Type"}),t(m,{prop:"localPort",label:"Local Port"}),t(m,{prop:"remoteHost",label:"Remote Host",width:"120"}),t(m,{prop:"remotePort",label:"Remote Port",width:"120"}),t(m,{prop:"keepAlive",label:"KeepAlive"},{default:n(s=>[t(M,{modelValue:s.row.keepAlive,"onUpdate:modelValue":c=>s.row.keepAlive=c,onChange:c=>u(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(m,{prop:"autoStartUp",label:"AutoStart"},{default:n(s=>[t(M,{modelValue:s.row.autoStartUp,"onUpdate:modelValue":c=>s.row.autoStartUp=c,onChange:c=>u(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(m,{prop:"state",label:"State"},{default:n(s=>[s.row.state==0?(r(),_(o,{key:0,type:"icon",icon:"el-icon-close text-base text-red"})):s.row.state==1?(r(),_(o,{key:1,type:"icon",icon:"el-icon-check text-base text-green"})):(r(),_(o,{key:2,type:"icon",icon:"el-icon-video-pause text-base text-yellow"})),v(" "+h(E(s.row.state)),1)]),_:1}),t(m,{fixed:"right",width:"200"},{default:n(s=>[s.row.state!=1?(r(),_(o,{key:0,type:"success",size:"small",title:"Start",loading:s.row.loading,icon:"el-icon-video-play",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},circle:"",onClick:c=>{A(s.row)}},null,8,["loading","onClick"])):N("",!0),s.row.state==1?(r(),_(o,{key:1,type:"danger",size:"small",title:"Stop",icon:"el-icon-switch-button",circle:"",onClick:c=>{b(s.row.id)}},null,8,["onClick"])):N("",!0),t(o,{type:"primary",size:"small",title:"Edit",icon:"el-icon-edit",style:{color:"var(--vscode-terminal-ansiCyan)"},circle:"",onClick:c=>{F(s.row)}},null,8,["onClick"]),t(o,{title:"delete",type:"danger",size:"small",icon:"el-icon-delete",style:{color:"#f56c6c"},circle:"",onClick:c=>D(s.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])],64)),t(ye,{onSave:u})])}}});export{Fe as default};
