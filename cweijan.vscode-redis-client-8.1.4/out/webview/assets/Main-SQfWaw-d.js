import{a as L,bh as A,A as B,r as p,e as J,N as P,v as d,f as b,a7 as R,a9 as U,h as l,g as s,F as $,B as j,j as c,J as u,K as w,o as n,n as S,k as E,L as K,t as M,$ as m,bi as O,I as T,a8 as Q,bj as F,s as q,C as z}from"./app-quOHq0P1.js";import{_ as H}from"./vscode-MMfGApC2.js";import{u as G}from"./resultUIStore-Q4wTjNwZ.js";import"./constants-DgoLmzql.js";import{b as _,D as k}from"./DatabaseType-C0wmHgR0.js";import"./wrapper-DGkkEdPY.js";import"./viewUtil-DCbZMcCo.js";import"./arrayUtil-CzswX_vs.js";import"./objectUtil-Z6JRxuBJ.js";const W={id:"tableTab",class:"tab"},X=["onClick"],Y=L({__name:"Main",setup(Z){const g=A(),y=G(),D=B(),a=p(null),v=p(!1),r=p("result"),N=J(()=>[{id:"design",i18n:"table.design",icon:"codicon-edit",disabled:()=>!v.value},{id:"result",i18n:"table.data",icon:"codicon-database blue"},{id:"log",i18n:"common.log",icon:"codicon-file"},{id:"erDiagram",i18n:"table.erDiagram",icon:"codicon-symbol-class yellow",hidden:()=>_(a.value),disabled:()=>!v.value||_(a.value)},{id:"status",i18n:"table.monitor",icon:"codicon-graph-line",disabled:()=>[k.SQLITE,k.DUCK_DB].includes(a.value),hidden:()=>_(a.value)}].filter(t=>{var e;return!((e=t.hidden)!=null&&e.call(t))})),f=t=>{typeof t=="string"&&(t={id:t});const{id:e,disabled:o}=t;o!=null&&o()||r.value!==e&&(r.value=e,g.push(e),e=="log"&&d.emit("initTerminal"))};P(()=>{r.value=g.currentRoute.value.name,window.addEventListener("message",({data:t})=>{["RUN","DATA"].includes(t.type)&&(a.value=t.content.dbType,["design","result","erDiagram"].includes(r.value)||f("result"))}),d.on("table_info",({singleTable:t,dbType:e})=>{a.value=e,v.value=t,v.value||f("result")})});const h=()=>{d.emit("editInVSCode",y.toolbar.sql)},x=()=>{if(!D.isPay)return q(m("plan.premiumNotice"));d.emit("viewJSON")};return(t,e)=>{const o=w("vsc-tooltip"),I=w("router-view");return n(),b("div",null,[R(s("ul",W,[(n(!0),b($,null,j(N.value,(i,V)=>{var C;return n(),b("li",{key:V,class:S(["tab__item",{"tab__item--active":r.value==i.id,disabled:(C=i.disabled)==null?void 0:C.call(i)}]),onClick:ee=>f(i)},[i.icon?(n(),b("i",{key:0,type:"icon",class:S(i.icon),style:{position:"relative",top:"3px"}},null,2)):E("",!0),K(" "+M(l(m)(i.i18n)),1)],10,X)}),128)),c(o,{title:l(m)("table.editInVSCode")},{default:u(()=>[s("div",{class:"panel-icon !pl-2",style:{"border-left":"1px solid var(--border-color)"},onClick:h},e[1]||(e[1]=[s("img",{src:H,alt:"VSCode Logo"},null,-1)]))]),_:1},8,["title"]),c(o,{title:l(m)("table.viewAsJSON")},{default:u(()=>[s("div",{class:"panel-icon",onClick:x},e[2]||(e[2]=[s("i",{class:"codicon-json text-yellow"},null,-1)]))]),_:1},8,["title"]),c(o,{title:l(m)("table.history")},{default:u(()=>[s("div",{class:"panel-icon",onClick:e[0]||(e[0]=i=>l(d).emit("viewHistory"))},e[3]||(e[3]=[s("i",{class:"codicon-history"},null,-1)]))]),_:1},8,["title"])],512),[[U,l(y).showSQLPanel]]),c(I,null,{default:u(({Component:i})=>[c(O,null,{default:u(()=>[(n(),T(F,null,[(n(),T(Q(i)))],1024))]),_:2},1024)]),_:1})])}}}),ce=z(Y,[["__scopeId","data-v-f2b0fd64"]]);export{ce as default};
